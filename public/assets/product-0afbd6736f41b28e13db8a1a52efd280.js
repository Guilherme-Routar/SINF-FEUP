function getProduto(o){var a=base_url_primavera+"/artigos/"+o;$.ajax({url:a,dataType:"json",type:"GET",error:function(o){$("#prod-title").html("<h2>Problema ao obter produto, ou produto inexistente...</h2>"),console.log("error fetching product"),console.log(o)},success:function(o){console.log(o),$("#prod-title").html(o.DescArtigo);var a=parseInt(o.PVP);console.log("PVP: "+a);var t=parseInt(o.IVA);console.log("IVA : "+t);var r=(a*(1+t/100)).toFixed(2)+" ";console.log("PRECO :"+r),r+=o.Moeda,$("#prod-price").html(r),null!=o.Marca?$("#prod-marca").html("Autor: "+o.Marca):$("#prod-marca").remove(),$("#prod-categoria em").html(o.Categoria),$("#prod-categoria").attr("href",url_categoria+o.Categoria),null!=o.SubCategoriaDesc&&($("#prod-subcategoria").before(" / "),$("#prod-subcategoria em").html(o.SubCategoriaDesc),$("#prod-subcategoria").attr("href",url_categoria+o.Categoria+"/"+o.SubCategoria)),$("#prod-estado em").html(o.Estado),$("#botao-loading").remove()}})}function addImgToProduct(o,a){$("#botao-loading").html(botao_load);var t=new FormData;t.append("imagem[image]",o),t.append("imagem[idProduto]",a),$.ajax({url:"/image",data:t,cache:!1,contentType:!1,processData:!1,type:"PUT",success:function(){location.reload()}})}function deleteImg(){$("#botao-loading").html(botao_load),imgId=$(".product-img-div.active").attr("data-img-id"),$.ajax({url:"/image/"+imgId,type:"DELETE",success:function(){location.reload()}})}var base_url_primavera="http://localhost:49822/api",url_categoria="http://localhost:3000/categoria/";botao_load='<button class="btn btn-lg btn-warning"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> A carregar...</button>',console.log("Ready to connect..."),$(document).ready(function(){var o=$("#prod-title").attr("data-id-product");console.log("PRODUCT ID : "),console.log(o),$("#botao-loading").html(botao_load),getProduto(o),$(".product-img").click(function(){$("#product-img-input").click()}),$("#product-img-input").change(function(){addImgToProduct($("#product-img-input")[0].files[0],$("#product-img-input").attr("data-id-product"))}),$("#product-del-img").click(deleteImg)});