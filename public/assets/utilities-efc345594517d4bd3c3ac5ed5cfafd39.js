function flyToElement(t,i){var a=($(this),3),e=$(t).clone();$(e).css({position:"absolute",top:$(t).offset().top+"px",left:$(t).offset().left+"px",opacity:1,"z-index":2e3}),$("body").append($(e));var n=$(i).offset().left+$(i).width()/2-$(t).width()/a/2,o=$(i).offset().top+$(i).height()/2-$(t).height()/a/2;$(e).animate({opacity:.4,left:n,top:o,width:$(t).width()/a,height:$(t).height()/a},700,function(){$(i).fadeOut("fast",function(){$(i).fadeIn("fast",function(){$(e).fadeOut("fast",function(){$(e).remove()})})})})}this.getProductContainer=function(t,i){return null===i&&(i="http://placehold.it/800x500"),'<div class="col-md-3 col-sm-6 hero-feature product-in-grid"><div class="thumbnail"><img src="'+i+'" alt="Foto de '+t.DescArtigo+'"><div class="caption"><h4>'+t.DescArtigo+"</h4><h5>"+t.PVP+'\u20ac</h5><p><a href="/product/'+t.CodArtigo+'" class="btn btn-primary">More Info</a></p></div></div></div>'},this.getProductContainer2=function(t,i){return null===i&&(i="http://placehold.it/400x250/000/fff"),'<div class="item  col-xs-12 col-sm-4 col-lg-4"> <div class="thumbnail"> <img id="img-artigo-'+t.CodArtigo+'" class="group list-group-image" src="'+i+'" alt="" /> <div class="caption"> <a href="/product/'+t.CodArtigo+'"><h4 class="group inner list-group-item-heading one-line-elipsis">'+t.DescArtigo+'</h4></a> <div class="container-fluid"> <div class="row"> <div class="col-xs-12 col-md-6"> <p class="lead">'+(t.PVP*(t.IVA/100+1)).toFixed(2)+'\u20ac</p> </div> <div class="col-xs-12 col-md-6"> <a class="add-to-cart-btn btn btn-success" data-id-artigo="'+t.CodArtigo+'"><span class="glyphicon glyphicon-shopping-cart" aria-hidden="true"></span> Adicionar</a> </div> </div> </div> </div> </div> </div>'},this.getImageFromProduct=function(t){var i;return i="http://localhost:3000/image/id_produto/"+t,$.ajax(i,{type:"GET",dataType:"json",error:function(t){return console.log("error fetching top."),console.log(t)},success:function(i){var a;try{if(null!==i)return $("#img-artigo-"+t).attr("src",i.image.url)}catch(t){return a=t,console.log(a)}}})},$(document).ready(function(){$("body").bind("DOMSubtreeModified",function(){$("#list").click(function(t){t.preventDefault(),$("#artigos-container .item").removeClass("grid-group-item"),$("#artigos-container .item").addClass("list-group-item")}),$("#grid").click(function(t){t.preventDefault(),$("#artigos-container .item").removeClass("list-group-item"),$("#artigos-container .item").addClass("grid-group-item")})}),$("#list").click(function(t){t.preventDefault(),$("#artigos-container .item").removeClass("grid-group-item"),$("#artigos-container .item").addClass("list-group-item")}),$("#grid").click(function(t){t.preventDefault(),$("#artigos-container .item").removeClass("list-group-item"),$("#artigos-container .item").addClass("grid-group-item")}),$(document).on("click",".add-to-cart-btn",function(){var t={};t.id=$(this).attr("data-id-artigo"),t.quantidade=1;var i={};i.artigo=t;var a="/carrinho/adicionar";$.ajax({url:a,type:"POST",dataType:"json",data:i,success:function(i){$(this).parent().find("img").eq(0);flyToElement($("#img-artigo-"+t.id),$("#cart-icon")),console.log(i)},error:function(t){console.log(t),console.log(t.responseText)}})}),$(document).on("click",".add-to-cart-btn-product-view",function(){var t={};t.id=$(this).attr("data-id-artigo");var i=$("#quantidade-product-view").val();if(isNaN(i))return void $("#quantidade-product-view").val("inv.!");t.quantidade=parseInt($("#quantidade-product-view").val());var a={};a.artigo=t;var e="/carrinho/adicionar";$.ajax({url:e,type:"POST",dataType:"json",data:a,success:function(t){flyToElement($(".quantidade-product-view-container"),$("#cart-icon")),console.log(t)},error:function(t){console.log(t),console.log(t.responseText)}})}),function(t){t(".spinner .btn:first-of-type").on("click",function(){t(".spinner input").val(parseInt(t(".spinner input").val(),10)+1)}),t(".spinner .btn:last-of-type").on("click",function(){t(".spinner input").val(parseInt(t(".spinner input").val(),10)-1)})}(jQuery)}),botao_load='<button class="btn btn-lg btn-warning"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> A carregar...</button>';var dateFormat=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,i=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,a=/[^-+\dA-Z]/g,e=function(t,i){for(t=String(t),i=i||2;t.length<i;)t="0"+t;return t};return function(n,o,r){var s=dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(n)||/\d/.test(n)||(o=n,n=void 0),n=n?new Date(n):new Date,isNaN(n))throw SyntaxError("invalid date");o=String(s.masks[o]||o||s.masks["default"]),"UTC:"==o.slice(0,4)&&(o=o.slice(4),r=!0);var d=r?"getUTC":"get",c=n[d+"Date"](),l=n[d+"Day"](),u=n[d+"Month"](),m=n[d+"FullYear"](),g=n[d+"Hours"](),p=n[d+"Minutes"](),y=n[d+"Seconds"](),f=n[d+"Milliseconds"](),h=r?0:n.getTimezoneOffset(),v={d:c,dd:e(c),ddd:s.i18n.dayNames[l],dddd:s.i18n.dayNames[l+7],m:u+1,mm:e(u+1),mmm:s.i18n.monthNames[u],mmmm:s.i18n.monthNames[u+12],yy:String(m).slice(2),yyyy:m,h:g%12||12,hh:e(g%12||12),H:g,HH:e(g),M:p,MM:e(p),s:y,ss:e(y),l:e(f,3),L:e(f>99?Math.round(f/10):f),t:g<12?"a":"p",tt:g<12?"am":"pm",T:g<12?"A":"P",TT:g<12?"AM":"PM",Z:r?"UTC":(String(n).match(i)||[""]).pop().replace(a,""),o:(h>0?"-":"+")+e(100*Math.floor(Math.abs(h)/60)+Math.abs(h)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!=10)*c%10]};return o.replace(t,function(t){return t in v?v[t]:t.slice(1,t.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(t,i){return dateFormat(this,t,i)};